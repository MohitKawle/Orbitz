var thingsToDo = [
    {
        city: 'Pune',
        title: 'Pune walking tour with a Punekar',
        image: 'https://mediaim.expedia.com/localexpert/2331514/ea1a9cf7-565c-46d5-ba66-c402e61e2c0b.jpg?impolicy=resizecrop&rw=1005&rh=565',
        rating: 3,
        price: 1000
    },

    {
        city: 'Pune',
        title: 'Full day guided tour of Pune',
        image: 'https://mediaim.expedia.com/localexpert/3090905/0707e486-3059-4b3c-a352-9cd5f8958484.jpg?impolicy=resizecrop&rw=1005&rh=565',
        rating: 5,
        price: 3000
    },

    {
        city: 'Pune',
        title: 'Pune to Mahabaleshwar trip',
        image: 'https://mediaim.expedia.com/localexpert/3299107/489e88f5-9b87-4511-83a9-79cb9353e09b.jpg?impolicy=resizecrop&rw=1005&rh=565',
        rating: 4,
        price: 5000
    },

    {
        city: 'Pune',
        title: 'Pune to Bhimashankar trip',
        image: 'https://mediaim.expedia.com/localexpert/3299113/082455a0-5b62-42a3-b2e8-9fd715d71e04.jpg?impolicy=resizecrop&rw=1005&rh=565',
        rating: 4,
        price: 4000
    },

    {
        city: 'Pune',
        title: 'Lakeside camping at Pawna lake',
        image: 'https://mediaim.expedia.com/localexpert/2972874/65800639-fd17-4e24-973e-2917c46184c0.jpg?impolicy=resizecrop&rw=1005&rh=565',
        rating: 5,
        price: 2500
    },

    {
        city: 'Pune',
        title: 'Lonavala hill top camping',
        image: 'https://mediaim.expedia.com/localexpert/2972915/eb7c76f6-694b-44cd-90a9-777411646a19.jpg?impolicy=resizecrop&rw=1005&rh=565',
        rating: 4,
        price: 3500
    },

    {
        city: 'Pune',
        title: 'Pune heritage guided tour',
        image: 'https://mediaim.expedia.com/localexpert/2977365/eb38dcc9-0dcd-4b71-9be9-58d67641d8db.jpg?impolicy=resizecrop&rw=1005&rh=565',
        rating: 5,
        price: 3000
    },

    {
        city: 'Pune',
        title: 'Tour to Sinhgad fort, Khadakwasla dam and Panshet dam',
        image: 'https://mediaim.expedia.com/localexpert/2113181/94a5a134-a0a7-486c-ad7e-9fa590f19c0e.jpg?impolicy=resizecrop&rw=1005&rh=565',
        rating: 4,
        price: 4500
    },

    {
        city: 'Pune',
        title: 'Pune food tasting tour',
        image: 'https://mediaim.expedia.com/localexpert/2111058/fb0bb2e6-31ea-42e8-9722-78787887a377.jpg?impolicy=resizecrop&rw=1005&rh=565',
        rating: 5,
        price: 2000
    },

    {
        city: 'Pune',
        title: 'Pune heritage cycle ride',
        image: 'https://mediaim.expedia.com/localexpert/2168847/a04d6027-0f3a-4d83-a379-52896807991a.jpg?impolicy=resizecrop&rw=1005&rh=565',
        rating: 3,
        price: 1500
    },

    {
        city: 'Bangalore',
        title: 'Bangalore food tasting tour',
        image: 'https://mediaim.expedia.com/localexpert/712617/774ec56b-3502-40f6-817f-b3b698f98665.jpg?impolicy=resizecrop&rw=1005&rh=565',
        rating: 4,
        price: 2000
    },

    {
        city: 'Bangalore',
        title: 'Mysore palace tour',
        image: 'https://mediaim.expedia.com/localexpert/708669/d14ac66e-d97c-4269-a78c-775ba103b08a.jpg?impolicy=resizecrop&rw=1005&rh=565',
        rating: 5,
        price: 2500
    },

    {
        city: 'Bangalore',
        title: 'Mysore heritage tour',
        image: 'https://mediaim.expedia.com/localexpert/977742/0657530d-5abc-4899-8423-d93d90a64d47.jpg?impolicy=resizecrop&rw=1005&rh=565',
        rating: 4,
        price: 3500
    },

    {
        city: 'Bangalore',
        title: 'Bangalore temples guided tour',
        image: 'https://mediaim.expedia.com/localexpert/1333734/31b97242-0b9d-44c9-b825-1babc73f3f33.jpg?impolicy=resizecrop&rw=1005&rh=565',
        rating: 5,
        price: 3500
    },

    {
        city: 'Bangalore',
        title: '4 days tour to Hampi and Badami',
        image: 'https://mediaim.expedia.com/localexpert/1263727/cfb4eef4-c8b6-448f-92f5-b24374778e1a.jpg?impolicy=resizecrop&rw=1005&rh=565',
        rating: 5,
        price: 12000
    },

    {
        city: 'Bangalore',
        title: 'Hustle and bustle of Bangalore walking tour',
        image: 'https://mediaim.expedia.com/localexpert/1271217/1e3b7210-7a36-4fb5-9706-e87ab734639e.jpg?impolicy=resizecrop&rw=1005&rh=565',
        rating: 3,
        price: 1000
    },

    {
        city: 'Bangalore',
        title: 'Belur and Halebid tour',
        image: 'https://mediaim.expedia.com/localexpert/1268910/116eead9-1b6a-48da-809f-b8bee0d35603.jpg?impolicy=resizecrop&rw=1005&rh=565',
        rating: 4,
        price: 4500
    },

    {
        city: 'Bangalore',
        title: 'Chitradurga fort tour',
        image: 'https://mediaim.expedia.com/localexpert/1282983/f3eaf439-ad62-490f-9f09-d012c93f233a.jpg?impolicy=resizecrop&rw=1005&rh=565',
        rating: 4,
        price: 2500
    },

    {
        city: 'Bangalore',
        title: 'Good morning Bangalore cycle tour',
        image: 'https://mediaim.expedia.com/localexpert/1305327/61c6f36d-a856-41d0-934f-2137268b9a86.jpg?impolicy=resizecrop&rw=1005&rh=565',
        rating: 3,
        price: 1000
    }
];

localStorage.setItem("thingsToDo", JSON.stringify(thingsToDo));

var thingsToDo = JSON.parse(localStorage.getItem("thingsToDo"));
dispplayData(thingsToDo);
var cartArr = JSON.parse(localStorage.getItem("cartItems")) || [];

function dispplayData(thingsToDo) {
    document.querySelector("#container").innerHTML = "";
    thingsToDo.map(function (elem) {
        var mainDiv = document.createElement("div");

        var img = document.createElement("img");
        img.setAttribute("src", elem.image);

        var name = document.createElement("p");
        name.innerText = elem.title;
        name.setAttribute("class", "name");

        var innerDiv = document.createElement("div");

        var price = document.createElement("p");
        price.innerText = elem.price;

        var rating = document.createElement("p");
        rating.innerText = elem.rating;

        innerDiv.append(price, rating);
        innerDiv.setAttribute("class", "priceDiv");

        var cart = document.createElement("button");
        cart.innerText = "Add to Cart";
        cart.setAttribute("id", "cart");
        cart.addEventListener("click", function () {
            addToCart(elem);
        });

        mainDiv.setAttribute("class", "boxes")
        mainDiv.append(img, name, innerDiv, cart);

        document.querySelector("#container").append(mainDiv);
    });
}

function addToCart(elem) {
  cartArr.push(elem);
  localStorage.setItem("cartItems", JSON.stringify(cartArr));
  console.log(cartArr);
}

document.querySelector("#sorter").addEventListener("click", sortByPrice);
function sortByPrice() {
    thingsToDo.map(function (elem) {
        var sorting = document.querySelector("#sorter").value;
        console.log(sorting);
        if (sorting == "l2h") {
            thingsToDo.sort(function (a, b) {
                return a.price - b.price;
            })
            dispplayData(thingsToDo)
        }
        else if (sorting == "h2l") {
            thingsToDo.sort(function (a, b) {
                return b.price - a.price;
            })
            dispplayData(thingsToDo)
        }
    })
}

function searchProduct() {
    thingsToDo.map(function (elem) {
        var searchText = document.querySelector("#searcher").value;
        console.log(searchText);
        var filterData = thingsToDo.filter(function (elem) {
        return elem.city.includes(searchText);
        })
        console.log(filterData);
        dispplayData(filterData);  
    })
}